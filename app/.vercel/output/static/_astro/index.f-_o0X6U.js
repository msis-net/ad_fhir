let U=(n,N,T,l)=>(n.events=n.events||{},n.events[T+10]||(n.events[T+10]=l(e=>{n.events[T].reduceRight((i,s)=>(s(i),i),{shared:{},...e})})),n.events[T]=n.events[T]||[],n.events[T].push(N),()=>{let e=n.events[T],i=e.indexOf(N);e.splice(i,1),e.length||(delete n.events[T],n.events[T+10](),delete n.events[T+10])}),t=1e3,f=(n,N)=>U(n,l=>{let e=N(l);e&&n.events[6].push(e)},5,l=>{let e=n.listen;n.listen=(...s)=>(!n.lc&&!n.active&&(n.active=!0,l()),e(...s));let i=n.off;return n.events[6]=[],n.off=()=>{i(),setTimeout(()=>{if(n.active&&!n.lc){n.active=!1;for(let s of n.events[6])s();n.events[6]=[]}},t)},()=>{n.listen=e,n.off=i}});export{f as o};
